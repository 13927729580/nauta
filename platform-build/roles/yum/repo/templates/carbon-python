Summary: Python precompiled carbon package
Name: carbon-python
Version: {{ build_major }}.{{ build_minor }}.{{ build_no }}
Release: {{ build_id }}
License: Apache-2.0
Group: Tools

BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root

Requires: python

%define  debug_package %{nil}

%description
%{summary}

%prep
# Empty section

%build
# Empty section.

%install
rm -rf %{buildroot}
mkdir -p  %{buildroot}

mkdir -p %{buildroot}/opt/carbon
virtualenv -p python2 --clear --prompt=carbon --system-site-packages %{buildroot}/opt/carbon/python
%{buildroot}/opt/carbon/python/bin/pip install -U ansible==2.5.0.0 docker-py==1.10.6 pyOpenSSL==17.5.0
virtualenv -p python2 --relocatable %{buildroot}/opt/carbon/python
find %{buildroot} -name '*.pyc' -type f -exec rm -rf {} \;
find %{buildroot} -name '__pycache__' -type f -exec rm -rf {} \;

exit 0
%clean
rm -rf %{buildroot}


%files
%defattr(-,root,root,-)
/opt/carbon/python/*
